# DecentralMind 2.0

## Vision

DecentralMind is an iOS application designed to be a secure, private, and intelligent personal knowledge base. It empowers users to capture, process, and query their digital information locally, functioning as a sophisticated on-device agent without relying on centralized cloud services for its core intelligence.

## Core Requirements

The development of this application is guided by four key principles:

1.  **Decentralized Storage:** All user data is synced to a decentralized network, ensuring data sovereignty and resilience. The current implementation uses **Storacha**, accessed via a secure WebView Bridge to handle its authentication protocol.
2.  **Local-First & Offline-Capable:** The app is built on **Core Data**, ensuring that all data is stored locally on the device first. This guarantees full functionality even when offline.
3.  **On-Device AI Processing:** To maintain absolute user privacy, all AI-powered analysis occurs directly on the user's device. This includes summarization, keyword extraction, and generating vector embeddings for semantic search.
4.  **Sophisticated Local Agents:** The architecture is explicitly designed to support advanced, local AI models such as **DeepSeek** and Apple's native frameworks. The goal is to process complex data types like emails and CSV files, allowing for sophisticated local queries against this information.

## Architecture Overview

The project follows a clean, modular architecture that separates concerns into distinct managers. This design is crucial for supporting the complex agent-based functionality required.

### Managers

*   `DataFlowManager.swift`: This is the central nervous system of the app. It acts as the single source of truth for all data, managing all CRUD (Create, Read, Update, Delete) operations for the `ContentEntity` objects in Core Data. It coordinates with the other managers to orchestrate the data processing pipeline.
*   `MLXManager.swift`: This is the dedicated AI engine. It is responsible for loading and running machine learning models (like DeepSeek via `mlx-swift` or built-in Apple models) to perform analysis tasks. *This component is stubbed and ready for the implementation of the core AI logic.*
*   `SearchIndexManager.swift`: This manager powers all search functionality. It currently uses a robust, keyword-based inverted index for fast text search. It is designed to be extended with a vector-based index to enable powerful semantic search capabilities, which will be driven by the embeddings generated by the `MLXManager`.

### State Management

*   `AppState.swift`: This is a global, observable object that creates and holds instances of the core managers (`DataFlowManager`, `SearchIndexManager`). It is injected into the SwiftUI view hierarchy as an `EnvironmentObject`, providing all views with a single, reliable point of access to the application's backend services.

### Data Model

*   `ContentEntity` (Core Data NSManagedObject): This is the universal data container for all information stored in the app, from simple text notes to emails and documents. Its flexible attribute set is designed to hold not only the original content but also all the metadata generated by the AI processing pipeline (summaries, keywords, embeddings, etc.).

## Development Status

The project recently underwent a significant refactoring and was recreated from scratch (from `DecentralMind` to `DecentralMind2.0`) to resolve deep-seated build issues caused by an unmaintained third-party library and Xcode project file corruption.

**Current Status:** **Stable and Buildable.** The core architecture is in place, and the main UI views (`HomeView`, `SearchView`) have been updated to work with the new, simplified data flow. The foundation is now solid.

**Next Steps:** The immediate next step is to implement the core AI logic within `MLXManager` and wire it into the `DataFlowManager` to begin processing content automatically. Following that, the `SearchIndexManager` will be enhanced to support semantic search. 